<!DOCTYPE html>
<html>
<head>
    <!-- Need to localise this later on. -->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Already localised -->
    <link rel="stylesheet" href="../font-icons/css/font-awesome.min.css">
    <link rel="stylesheet" href="../font-baby/flaticon.css">
    
    <link type="text/css" rel="stylesheet" href="../css/materialize.min.css" media="screen,projection" />
    <link type="text/css" rel="stylesheet" href="../css/mbn.css" media="screen,projection" />

    <!-- iOS set up to go into mobile mode. Need to set for Android accordingly. -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, scrollable=no, user-scalable=no" />

    <!-- Load the scripts but import jQuery before materialise.js -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="../js/materialize.min.js"></script>
    <script type="text/javascript" src="../js/mbn.js"></script>
    <script>
                
        var lastScrollTop = 0; // Track the last event
        var objToCheck;
        var lastScrollAction = "";
        
        $(document).ready(function() {
            objToCheck = $("#section-title");
            $("#section-card-min").hide();
        
            /*
            $(document).ontouchmove(function(event) {
                event.preventDefault();
            });
            */
        });
        
        function doLoad(w) {
            window.location = w;
        }
        
        $(window).scroll(function() {
            var st = objToCheck.offset().top - $(window).scrollTop();

            if(st < lastScrollTop) {
                if(parseInt(st) < 65 && lastScrollAction == "up") {
                    // Change the type of card to display.
                    $("#section-card").hide();
                    $("#section-card-min").show();
                    
                    // Modify CSS to add the extra 50px room for content to be in the right place.
                    $("#section-content").addClass("mbn-content-offset");
                    
                    // Set where to monitor for point of switch.
                    objToCheck = $("#section-content");
                }
                
                lastScrollAction = "up";
            }
            else {
                if(parseInt(st) > 65 && lastScrollAction == "down") {
                    // Reverse the card to display
                    $("#section-card").show();
                    $("#section-card-min").hide();
                    
                    // Modify CSS to remove the offset created as a result of swapping the display card.
                    $("#section-content").removeClass("mbn-content-offset");
                    
                    // Set where to monitor for point of switch
                    objToCheck = $("#section-title");
                }
                
                lastScrollAction = "down";
            }

            lastScrollTop = st; // Remember this as the current position
        });
    </script>
</head>
<body>
    <div class="mbn-logo">
        <img src="../images/logo.png" class="mbn-logo-style" />
    </div>
    
    <div class="navbar-fixed">
        <nav class="mbn-nav">
            <div class="nav-wrapper">
                <a class="mbn-name">Flynn Now</a>
                <i class="fa fa-search fa-2x mbn-search-style"></i>
            </div>
        </nav>
    </div>
    
    <!-- Two different display cards -->
    <div class="card mbn-card" id="section-card">
        <div class="card-image">
            <img src="../images/favorites.png" />
            <span class="card-title mbn-card-title" id="section-title">
                More
            </span>
        </div>
    </div>

    <div class="card mbn-card-fixed-content" id="section-card-min">
        <span class="card-title mbn-card-title-content" style="min-width: 100vw !important;" id="section-title">
            More
        </span>
    </div>

    <!-- Content -->
    <div class="mbn-content" id="section-content">
            <table class="striped" id="content">
                <tr>
                    <td colspan="3"><b>My profile</b></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">Update feeding method</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">Update contact details</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">Change profile photo</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                
                <tr>
                    <td colspan="3"><b>About My Baby Now</b></td>
                </tr>
                <tr onclick="doLoad('content.html');">
                    <td style="width: 5%;"></td>
                    <td class="mbn-menu-desc">About this app</td>
                    <td style="width: 8%"><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">The team</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">My Baby Now surveys</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">Who to contact about the app</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">Acknowledgements</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">Copyright</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">Disclaimer</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">Privacy</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                
                <tr>
                    <td colspan="3"><b>Others</b></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">Log out</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">Troubleshooting</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="mbn-menu-desc">Reset this app</td>
                    <td><i class="fa fa-angle-right fa-lg"></i></td>
                </tr>
            </table>
            <p></p>
    </div>

    <div class="navbar-fixed mbn-footer hide-on-med-and-up">
        <nav class="mbn-nav">
            <div class="nav-wrapper">
                <div class="container">
                    <div class="row">
                        <div class="col mbn-icon" onclick="Load('feed');">
                            <p>
                                <img src="../images/feed.png" style="width:30%;" />
                                <br />
                                <span class="mbn-icon-text">My baby</span>
                            </p>
                        </div>
                        <div class="col mbn-icon" onclick="Load('topics');">
                            <p>
                                <img src="../images/topics.png" style="width:30%;" />
                                <br />
                                <span class="mbn-icon-text">Topics</span>
                            </p>
                        </div>
                        <div class="col mbn-icon" onclick="Load('tools');">
                            <p>
                                <img src="../images/tools.png" style="width:30%;" />
                                <br />
                                <span class="mbn-icon-text">Tools</span>
                            </p>
                        </div>
                        <div class="col mbn-icon" onclick="Load('forum');">
                            <p>
                                <img src="../images/forum.png" style="width:30%;" />
                                <br />
                                <span class="mbn-icon-text">Forum</span>
                            </p>
                        </div>
                        <div class="col mbn-icon" onclick="Load('more');">
                            <p class="mbn-icon-selected">
                                <img src="../images/more-s.png" style="width:30%;" />
                                <br />
                                <span class="mbn-icon-text-selected">More</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>
</body>

</html>